<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­åŒ»AIæ™ºèƒ½é—®è¯Šç³»ç»Ÿ - åŒ»ç”Ÿä¸“ç”¨é—¨æˆ·</title>
    <link rel="stylesheet" href="/static/doctor_thinking_style.css">
    <style>
        .portal-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            color: white;
            text-align: center;
        }
        
        .portal-header {
            margin-bottom: 40px;
        }
        
        .portal-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .portal-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .access-form {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            box-sizing: border-box;
        }
        
        .access-btn {
            background: #ff6b6b;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }
        
        .access-btn:hover {
            background: #ee5a52;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .feature-card h3 {
            margin-bottom: 10px;
            color: #ffd93d;
        }
        
        .error-message {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        
        .success-message {
            background: rgba(107, 255, 107, 0.2);
            color: #6bff6b;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        
        .info-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: left;
        }
        
        .quick-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .quick-link {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .quick-link:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="portal-container">
        <div class="portal-header">
            <h1>ğŸ¥ ä¸­åŒ»AIæ™ºèƒ½é—®è¯Šç³»ç»Ÿ</h1>
            <h2>åŒ»ç”Ÿä¸“ç”¨é—¨æˆ·</h2>
            <p>å½•å…¥æ‚¨çš„ä¸­åŒ»è¯Šç–—æ€ç»´ï¼Œè®©AIå­¦ä¹ æ‚¨çš„ä¸´åºŠç»éªŒï¼Œä¸ºæ›´å¤šæ‚£è€…æä¾›ç²¾å‡†æ²»ç–—</p>
        </div>
        
        <!-- è®¿é—®è®¤è¯è¡¨å• -->
        <div class="access-form" id="authForm">
            <h3>åŒ»ç”Ÿèº«ä»½éªŒè¯</h3>
            <form onsubmit="authenticateDoctor(event)">
                <div class="form-group">
                    <label for="doctorCode">åŒ»ç”Ÿè®¿é—®ç </label>
                    <input type="password" id="doctorCode" placeholder="è¯·è¾“å…¥åŒ»ç”Ÿä¸“ç”¨è®¿é—®ç " required>
                    <small style="opacity: 0.8;">è¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜è·å–è®¿é—®ç </small>
                </div>
                
                <div class="form-group">
                    <label for="doctorName">åŒ»ç”Ÿå§“å</label>
                    <input type="text" id="doctorName" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" required>
                </div>
                
                <button type="submit" class="access-btn">ğŸ” éªŒè¯èº«ä»½å¹¶è¿›å…¥</button>
            </form>
            
            <div class="error-message" id="errorMessage"></div>
            <div class="success-message" id="successMessage"></div>
        </div>
        
        <!-- åŠŸèƒ½å…¥å£ï¼ˆè®¤è¯åæ˜¾ç¤ºï¼‰ -->
        <div id="doctorPanel" style="display: none;">
            <h3>ğŸ‘¨â€âš•ï¸ æ¬¢è¿ï¼Œ<span id="welcomeName"></span>åŒ»ç”Ÿï¼</h3>
            
            <div class="quick-links">
                <a href="/static/doctor_thinking_input.html" class="quick-link">
                    ğŸ§  å½•å…¥è¯Šç–—æ€ç»´
                </a>
                <a href="/static/doctor_management.html" class="quick-link">
                    ğŸ“Š ç®¡ç†æˆ‘çš„æ€ç»´æ¨¡å¼
                </a>
                <a href="#" onclick="checkSystemStatus()" class="quick-link">
                    âš¡ ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
                </a>
                <a href="/" class="quick-link">
                    ğŸ  è¿”å›æ‚£è€…é—®è¯Šç³»ç»Ÿ
                </a>
            </div>
            
            <div id="systemStatus" style="display: none; margin-top: 20px;">
                <div class="info-section">
                    <h4>ğŸ“ˆ ç³»ç»ŸçŠ¶æ€</h4>
                    <div id="statusContent">æ­£åœ¨åŠ è½½...</div>
                </div>
            </div>
        </div>
        
        <div class="features">
            <div class="feature-card">
                <h3>ğŸ¯ ä¸ªæ€§åŒ–å­¦ä¹ </h3>
                <p>ç³»ç»Ÿä¼šå­¦ä¹ æ‚¨çš„è¯Šç–—æ€ç»´æ¨¡å¼ï¼Œå»ºç«‹ä¸“å±çš„å†³ç­–æ ‘</p>
            </div>
            
            <div class="feature-card">
                <h3>ğŸš€ æ™ºèƒ½æ¨è</h3>
                <p>æ ¹æ®æ‚£è€…ç—‡çŠ¶è‡ªåŠ¨æ¨èæœ€é€‚åˆçš„åŒ»ç”Ÿè¿›è¡Œè¯Šç–—</p>
            </div>
            
            <div class="feature-card">
                <h3>ğŸ“Š æ•°æ®åˆ†æ</h3>
                <p>æä¾›è¯¦ç»†çš„è¯Šç–—æ•°æ®åˆ†æå’Œå‡†ç¡®ç‡ç»Ÿè®¡</p>
            </div>
            
            <div class="feature-card">
                <h3>ğŸ”’ å®‰å…¨ä¿æŠ¤</h3>
                <p>æ‰€æœ‰æ•°æ®æœ¬åœ°å­˜å‚¨ï¼Œç¡®ä¿åŒ»ç–—æ•°æ®å®‰å…¨å’Œéšç§</p>
            </div>
        </div>
        
        <div class="info-section">
            <h4>ğŸ“ ä½¿ç”¨è¯´æ˜</h4>
            <ul style="text-align: left; padding-left: 20px;">
                <li><strong>å½•å…¥æ€ç»´æ¨¡å¼ï¼š</strong>æŒ‰ç…§4ä¸ªæ­¥éª¤å½•å…¥æ‚¨çš„è¯Šç–—æ€ç»´ï¼šåŸºæœ¬ä¿¡æ¯ â†’ ä¸“ç§‘ä¿¡æ¯ â†’ æ€ç»´æ­¥éª¤ â†’ é¢„è§ˆç¡®è®¤</li>
                <li><strong>æ€ç»´æ­¥éª¤è®¾è®¡ï¼š</strong>å¯ä»¥è®¾ç½®ç—‡çŠ¶è¯„ä¼°ã€è¯å€™åˆ†æã€æ–¹å‰‚é€‰æ‹©ã€å‰‚é‡è°ƒæ•´ç­‰å¤šä¸ªå†³ç­–èŠ‚ç‚¹</li>
                <li><strong>æ¡ä»¶è®¾ç½®ï¼š</strong>ä¸ºæ¯ä¸ªæ­¥éª¤è®¾ç½®è¯Šæ–­æ¡ä»¶ï¼Œå¦‚ç—‡çŠ¶å­˜åœ¨æ€§ã€ä¸¥é‡ç¨‹åº¦ã€è„‰è±¡èˆŒè±¡ç­‰</li>
                <li><strong>è¡ŒåŠ¨å®šä¹‰ï¼š</strong>å®šä¹‰æ¯ä¸ªæ­¥éª¤çš„è¯Šç–—è¡ŒåŠ¨ï¼Œå¦‚è®°å½•ç—‡çŠ¶ã€åˆ†æè¯å€™ã€é€‰æ‹©æ–¹å‰‚ç­‰</li>
                <li><strong>ç³»ç»Ÿé›†æˆï¼š</strong>å½•å…¥å®Œæˆåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨æ‚£è€…å’¨è¯¢æ—¶ä½¿ç”¨æ‚¨çš„æ€ç»´æ¨¡å¼</li>
            </ul>
        </div>
        
        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
            <p style="opacity: 0.8;">
                <small>
                    ğŸ’¡ æç¤ºï¼šæœ¬ç³»ç»Ÿæ”¯æŒå¤–ç½‘è®¿é—®ï¼ŒåŒ»ç”Ÿå¯ä»¥è¿œç¨‹å½•å…¥æ€ç»´æ¨¡å¼<br>
                    ğŸ”— è®¿é—®åœ°å€ï¼š<strong id="currentUrl"></strong>/static/doctor_portal.html
                </small>
            </p>
        </div>
    </div>

    <script>
        // æ˜¾ç¤ºå½“å‰è®¿é—®åœ°å€
        document.getElementById('currentUrl').textContent = window.location.origin;
        
        // é¢„è®¾çš„åŒ»ç”Ÿè®¿é—®ç ï¼ˆå®é™…éƒ¨ç½²æ—¶åº”è¯¥ä½¿ç”¨æ›´å®‰å…¨çš„è®¤è¯æ–¹å¼ï¼‰
        const DOCTOR_ACCESS_CODES = {
            'tcm2024': 'ä¸­åŒ»AIç³»ç»Ÿ',
            'doctor123': 'æ¼”ç¤ºåŒ»ç”Ÿ',
            'zhangzj': 'å¼ ä»²æ™¯ä¼ äºº',
            'lidongyw': 'æä¸œå£ä¼ äºº',
            'yetsh': 'å¶å¤©å£«ä¼ äºº'
        };
        
        // åŒ»ç”Ÿèº«ä»½éªŒè¯
        function authenticateDoctor(event) {
            event.preventDefault();
            
            const code = document.getElementById('doctorCode').value;
            const name = document.getElementById('doctorName').value;
            const errorMsg = document.getElementById('errorMessage');
            const successMsg = document.getElementById('successMessage');
            
            // æ¸…é™¤ä¹‹å‰çš„æ¶ˆæ¯
            errorMsg.style.display = 'none';
            successMsg.style.display = 'none';
            
            if (DOCTOR_ACCESS_CODES[code]) {
                // éªŒè¯æˆåŠŸ
                successMsg.textContent = `âœ… èº«ä»½éªŒè¯æˆåŠŸï¼æ¬¢è¿ ${name} åŒ»ç”Ÿ`;
                successMsg.style.display = 'block';
                
                // æ˜¾ç¤ºåŒ»ç”Ÿé¢æ¿
                document.getElementById('authForm').style.display = 'none';
                document.getElementById('doctorPanel').style.display = 'block';
                document.getElementById('welcomeName').textContent = name;
                
                // ä¿å­˜åŒ»ç”Ÿä¿¡æ¯åˆ°æœ¬åœ°å­˜å‚¨
                localStorage.setItem('doctorName', name);
                localStorage.setItem('doctorCode', code);
                
            } else {
                // éªŒè¯å¤±è´¥
                errorMsg.textContent = 'âŒ è®¿é—®ç é”™è¯¯ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜è·å–æ­£ç¡®çš„è®¿é—®ç ';
                errorMsg.style.display = 'block';
            }
        }
        
        // æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
        async function checkSystemStatus() {
            const statusDiv = document.getElementById('systemStatus');
            const contentDiv = document.getElementById('statusContent');
            
            statusDiv.style.display = 'block';
            contentDiv.innerHTML = 'æ­£åœ¨æ£€æŸ¥ç³»ç»ŸçŠ¶æ€...';
            
            try {
                // æ£€æŸ¥åŒ»ç”Ÿæ€ç»´ç³»ç»Ÿç»Ÿè®¡
                const response = await axios.get('/doctor_statistics');
                
                if (response.data.success) {
                    const stats = response.data.statistics;
                    contentDiv.innerHTML = `
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 2em; color: #ffd93d;">${stats.total_doctors}</div>
                                <div>æ€»åŒ»ç”Ÿæ•°</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 2em; color: #6bff6b;">${stats.total_patterns}</div>
                                <div>æ€ç»´æ¨¡å¼æ•°</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 2em; color: #ff6b6b;">${stats.total_cases}</div>
                                <div>å­¦ä¹ æ¡ˆä¾‹æ•°</div>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <strong>ä¸“ä¸šåˆ†å¸ƒï¼š</strong>${JSON.stringify(stats.doctors_by_specialty, null, 2).replace(/[{}\"]/g, '').replace(/,/g, ', ')}<br>
                            <strong>ç–¾ç—…åˆ†å¸ƒï¼š</strong>${JSON.stringify(stats.patterns_by_disease, null, 2).replace(/[{}\"]/g, '').replace(/,/g, ', ')}
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: rgba(107, 255, 107, 0.2); border-radius: 5px;">
                            âœ… åŒ»ç”Ÿæ€ç»´ç³»ç»Ÿè¿è¡Œæ­£å¸¸
                        </div>
                    `;
                } else {
                    contentDiv.innerHTML = `
                        <div style="padding: 10px; background: rgba(255, 107, 107, 0.2); border-radius: 5px;">
                            âŒ ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å¤±è´¥ï¼š${response.data.message}
                        </div>
                    `;
                }
            } catch (error) {
                contentDiv.innerHTML = `
                    <div style="padding: 10px; background: rgba(255, 107, 107, 0.2); border-radius: 5px;">
                        âŒ æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼š${error.message}
                    </div>
                `;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æ˜¯å¦å·²ç»ç™»å½•
        window.onload = function() {
            const savedName = localStorage.getItem('doctorName');
            const savedCode = localStorage.getItem('doctorCode');
            
            if (savedName && savedCode && DOCTOR_ACCESS_CODES[savedCode]) {
                // è‡ªåŠ¨ç™»å½•
                document.getElementById('authForm').style.display = 'none';
                document.getElementById('doctorPanel').style.display = 'block';
                document.getElementById('welcomeName').textContent = savedName;
            }
        };
    </script>
</body>
</html>