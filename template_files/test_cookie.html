<!DOCTYPE html>
<html>
<head>
    <title>Cookie测试</title>
</head>
<body>
    <h1>Cookie测试</h1>
    <p id="cookies"></p>
    <p id="localStorage"></p>
    
    <script>
        // 显示所有cookies
        document.getElementById('cookies').innerHTML = 'Cookies: ' + document.cookie;
        
        // 显示localStorage中的tokens
        const doctorToken = localStorage.getItem('doctorToken');
        document.getElementById('localStorage').innerHTML = 'doctorToken: ' + (doctorToken || 'null');
        
        // 尝试从cookie中提取session_token
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }
        
        const sessionToken = getCookie('session_token');
        console.log('Session token from cookie:', sessionToken);
        
        if (sessionToken && !doctorToken) {
            // 如果有session_token但没有doctorToken，将其设置为doctorToken
            localStorage.setItem('doctorToken', sessionToken);
            document.getElementById('localStorage').innerHTML += '<br>已设置doctorToken: ' + sessionToken;
        }
    </script>
</body>
</html>